# g2-sdk-proto/go

## :warning: WARNING: g2-sdk-proto/go is still in development :warning: _

At the moment, this is "work-in-progress" with Semantic Versions of `0.n.x`.
Although it can be reviewed and commented on,
the recommendation is not to use it yet.

## Synopsis

The Senzing g2-sdk-proto/go packages provide code generated by
[protoc](https://github.com/senzing-garage/knowledge-base/blob/main/WHATIS/protoc.md)
for use in creating Senzing gRPC clients and servers.

[![Go Reference](https://pkg.go.dev/badge/github.com/senzing-garage/g2-sdk-proto/go.svg)](https://pkg.go.dev/github.com/senzing-garage/g2-sdk-proto/go)
[![Go Report Card](https://goreportcard.com/badge/github.com/senzing-garage/g2-sdk-proto/go)](https://goreportcard.com/report/github.com/senzing-garage/g2-sdk-proto/go)

## Overview

1. Import the Senzing `g2-sdk-proto/go` packages.
   Example:

    ```go
    import (
        "github.com/senzing-garage/g2-sdk-proto/go/g2config"
        "github.com/senzing-garage/g2-sdk-proto/go/g2configmgr"
        "github.com/senzing-garage/g2-sdk-proto/go/g2diagnostic"
        "github.com/senzing-garage/g2-sdk-proto/go/g2engine"
        "github.com/senzing-garage/g2-sdk-proto/go/g2product"
    )
    ```

1. Examples of use:
    1. Used in [server](https://github.com/senzing-garage/serve-grpc/blob/main/g2engineserver/g2engineserver.go)
    1. Used in [client](https://github.com/senzing-garage/g2-sdk-go-grpc/blob/main/g2engineclient/g2engineclient.go)

## Development

This section describes how the packages are generated.
For package use, see above.

The Senzing g2-sdk-proto/go packages are generated by the
[protoc](https://github.com/senzing-garage/knowledge-base/blob/main/WHATIS/protoc.md)
command.

1. Set these environment variable values identifying the Git repository:

    ```console
    export GIT_ACCOUNT=senzing
    export GIT_REPOSITORY=g2-sdk-proto
    export GIT_ACCOUNT_DIR=~/${GIT_ACCOUNT}.git
    export GIT_REPOSITORY_DIR="${GIT_ACCOUNT_DIR}/${GIT_REPOSITORY}"

    ```

1. Enumerate the Senzing components.
   Example:

    ```console
    export SENZING_COMPONENTS=( \
      "g2config" \
      "g2configmgr" \
      "g2diagnostic" \
      "g2engine" \
      "g2hasher" \
      "g2product" \
      "g2ssadm" \
    )

    ```

1. [Generating client and server code](https://grpc.io/docs/languages/go/basics/#generating-client-and-server-code).
   Example:

    ```console
    for SENZING_COMPONENT in ${SENZING_COMPONENTS[@]}; \
    do \
      export SENZING_OUTPUT_DIR=${GIT_REPOSITORY_DIR}/go/${SENZING_COMPONENT}
      mkdir -p ${SENZING_OUTPUT_DIR}
      protoc \
        --proto_path=${GIT_REPOSITORY_DIR}/ \
        --go_out=${SENZING_OUTPUT_DIR} \
        --go_opt=paths=source_relative \
        --go-grpc_out=${SENZING_OUTPUT_DIR} \
        --go-grpc_opt=paths=source_relative \
        ${GIT_REPOSITORY_DIR}/${SENZING_COMPONENT}.proto
    done

    ```
